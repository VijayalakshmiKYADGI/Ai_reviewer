{
    "messages": [
        "{",
        "\"severity\": \"HIGH\",",
        "\"category\": \"Security\",",
        "\"file_path\": \"config.py\",",
        "\"line_number\": \"N/A\",",
        "\"issue_description\": \"HTTP is used instead of HTTPS.\",",
        "\"fix_suggestion\": \"Ensure all communication uses HTTPS for secure data transmission.\"",
        "},",
        "{",
        "\"severity\": \"HIGH\",",
        "\"category\": \"Security\",",
        "\"file_path\": \"config.py\",",
        "\"line_number\": \"N/A\",",
        "\"issue_description\": \"Rate limiting is disabled.\",",
        "\"fix_suggestion\": \"Enable rate limiting to protect against brute-force attacks and denial-of-service.\"",
        "},",
        "{",
        "\"severity\": \"HIGH\",",
        "\"category\": \"Security\",",
        "\"file_path\": \"config.py\",",
        "\"line_number\": \"N/A\",",
        "\"issue_description\": \"General hardcoded values found.\",",
        "\"fix_suggestion\": \"Review code for any other hardcoded values that should be externalized.\"",
        "},",
        "{",
        "\"severity\": \"HIGH\",",
        "},",
        "},",
        "\"category\": \"Architectural\",",
        "\"file_path\": \"config.py\",",
        "{",
        "{",
        "\"severity\": \"MEDIUM\",",
        "\"category\": \"Architectural\",",
        "\"line_number\": \"N/A\",",
        "\"severity\": \"MEDIUM\",",
        "\"issue_description\": \"Security Not a Primary Design Concern: The presence of multiple security-related issues (hardcoded AWS credentials, weak passwords, HTTP instead of HTTPS, disabled rate limiting and authentication) suggests that security was not a foundational aspect of the software's architecture. This leads to inherent vulnerabilities and a fragile system.\",",
        "\"file_path\": \"config.py\",",
        "\"category\": \"Security\",",
        "\"fix_suggestion\": \"Integrate security considerations from the outset of the design process. Adopt a security-by-design approach. Implement authentication, authorization, encryption, rate limiting, and logging as core architectural components, not as optional add-ons.\"",
        "\"file_path\": \"config.py\",",
        "\"line_number\": \"N/A\",",
        "\"issue_description\": \"Logging is disabled.\",",
        "\"fix_suggestion\": \"Enable logging to aid in security monitoring and incident response.\"",
        "\"line_number\": \"N/A\",",
        "\"issue_description\": \"Potential for Monolithic Configuration Class: While the current AST analysis of `config.py` shows a simple `Config` class, the extensive list of configuration-related issues suggests a potential for this class to grow into a 'God Class' if not managed carefully. A single class handling all configuration aspects can lead to high coupling and low cohesion, making it difficult to maintain and test.\",",
        "\"fix_suggestion\": \"Consider refactoring configuration into smaller, more focused modules or classes based on their domain (e.g., database configuration, security configuration, logging configuration). This promotes better cohesion and adheres to the Single Responsibility Principle.\"",
        "}",
        "]",
        "}",
        "```",
        "",
        "",
        "[2026-01-25 13:48:07][DEBUG]: == Working Agent: Technical Report Writer",
        "[2026-01-25 13:48:07][INFO]: == Starting Task: Format the aggregated findings into a GitHub Pull Request review.",
        "",
        "1. Create inline_comments for specific lines of code.",
        "2. Create a high-level summary_comment.",
        "3. Determine review_state:",
        "- REQUESTED_CHANGES if any CRITICAL/HIGH issues.",
        "- COMMENTED if only MEDIUM/LOW issues.",
        "- APPROVED if no findings.",
        "",
        "Format exactly as the GitHubReview schema.",
        "",
        "Error parsing JSON: Expecting value: line 1 column 1 (char 0). Attempting to handle partial JSON.",
        "[2026-01-25 13:48:17][DEBUG]: == [Technical Report Writer] Task output: inline_comments=[{'file_path': 'config.py', 'line_number': '45', 'comment': 'CRITICAL: Hardcoded credentials found. This is a major security risk. Use environment variables or a secure secrets management system.\\nCRITICAL: Hardcoded secrets found. This is a major security risk. Use environment variables or a secure secrets management system.\\nCRITICAL: AWS Credentials hardcoded. This is a critical security issue. Use IAM roles, environment variables, or a secure secrets management system for AWS credentials.\\nCRITICAL: ENABLE_AUTHENTICATION = False. Authentication should be enabled to protect resources. Enable authentication mechanisms to secure access to the application.\\nHIGH: E0001: Parsing failed: \\'invalid syntax (tmpfqbkmdid, line 45)\\'. This prevents full analysis of the file. Ensure the code is not truncated and is syntactically correct.\\nHIGH: DEBUG = True. Debug mode should be disabled in production environments for security reasons. Set DEBUG to False in production.\\nHIGH: ALLOWED_HOSTS = [\"*\"] is too permissive. This can lead to security vulnerabilities. Specify a list of allowed hosts instead of using a wildcard.\\nHIGH: Weak password detected or implied. Passwords should be strong and complex. Enforce strong password policies and avoid hardcoding passwords.\\nHIGH: HTTP instead of HTTPS used. This exposes data to interception. Ensure all communication uses HTTPS.\\nHIGH: ENABLE_LOGGING = False. Logging should be enabled in production for security monitoring and debugging. Enable logging in production environments.\\nHIGH: ENABLE_RATE_LIMITING = False. Rate limiting is crucial for preventing abuse and denial-of-service attacks. Enable rate limiting to protect against brute-force attacks and other forms of abuse.'}] summary_comment=\"This review highlights several critical and high-severity issues that require immediate attention. The most pressing concerns are related to security vulnerabilities, including hardcoded credentials, disabled authentication, and insecure configuration practices. A syntax error on line 45 is also preventing a full analysis of the `config.py` file. Please address these issues to improve the security posture and stability of the application.\\n\\n**Critical Issues:**\\n*   **Hardcoded Credentials/Secrets/AWS Credentials:** Multiple instances of sensitive information being hardcoded pose a significant security risk. Please use environment variables or a secure secrets management system.\\n*   **Authentication Disabled:** The `ENABLE_AUTHENTICATION` flag is set to `False`, leaving resources unprotected. This must be enabled.\\n*   **Insecure Configuration Management:** The overall approach to configuration is flawed, with hardcoded secrets, overly permissive settings, and a lack of separation between configuration and code.\\n\\n**High Severity Issues:**\\n*   **Syntax Error:** A critical syntax error on line 45 (`invalid syntax`) needs to be resolved to allow for complete code analysis.\\n*   **Debug Mode Enabled:** `DEBUG = True` should be disabled in production environments.\\n*   **Permissive `ALLOWED_HOSTS`:** `ALLOWED_HOSTS = ['*']` is too broad and should be restricted.\\n*   **Weak Security Practices:** Issues like weak passwords, use of HTTP instead of HTTPS, disabled logging, and disabled rate limiting all contribute to a less secure application.\\n*   **Architectural Security Concerns:** Security does not appear to be a primary design concern, leading to fundamental vulnerabilities.\\n\\n**Medium Severity Issues:**\\n*   **Logging Disabled:** While not critical, enabling logging is important for monitoring and debugging.\\n*   **Potential for Monolithic Configuration:** Consider refactoring the configuration class to improve maintainability.\\n\\nPlease prioritize the critical and high-severity items. Once the syntax error is resolved, a more thorough review can be conducted.\" review_state='REQUESTED_CHANGES'",
        "",
        "",
        "2026-01-25 13:48:17 [info     ] database_connected             path=postgresql://postgres:GXmuOYDAzAKKLjzRcRkXewzqamHjMNvn@mainline.proxy.rlwy.net:17322/railway",
        "2026-01-25 13:48:17 [info     ] database_connected             path=postgresql://postgres:GXmuOYDAzAKKLjzRcRkXewzqamHjMNvn@mainline.proxy.rlwy.net:17322/railway",
        "2026-01-25 13:48:17 [error    ] save_review_failed             error='UNIQUE constraint failed: reviews.repo_name, reviews.pr_number'",
        "2026-01-25 13:48:17 [error    ] save_results_failed            error='UNIQUE constraint failed: reviews.repo_name, reviews.pr_number'",
        "2026-01-25 13:48:17 [info     ] pipeline_completed             execution_time=1396.024911403656",
        "2026-01-25 13:48:17 [info     ] crewai_pipeline_completed      findings_count=1 pr_number=33 repo=VijayalakshmiKYADGI/test",
        "2026-01-25 13:48:17 [error    ] webhook_processing_failed      delivery_id=3ec88a90-f9f1-11f0-96d4-dae0e7d1bb33 error=\"'GitHubCommenter' object has no attribute '_format_summary'\"",
        "╭───────────────────── Traceback (most recent call last) ──────────────────────╮",
        "/app/github_integration/webhook_handler.py:71 in process_pr_event",
        "",
        "68",
        "69          # Route to appropriate handler",
        "70          if action == \"opened\":",
        "❱  71             return await self.handle_opened(payload, delivery_id)",
        "72          elif action == \"synchronize\":",
        "73             return await self.handle_synchronize(payload, delivery",
        "74          elif action == \"reopened\":",
        "",
        "╭───────────────────────────────── locals ─────────────────────────────────╮",
        "action = 'opened'",
        "delivery_id = '3ec88a90-f9f1-11f0-96d4-dae0e7d1bb33'",
        "e = AttributeError(\"'GitHubCommenter' object has no",
        "attribute '_format_summary'\")",
        "payload = {",
        "'action': 'opened',",
        "'number': 33,",
        "'pull_request': {",
        "'url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test…",
        "'id': 3208341244,",
        "'node_id': 'PR_kwDOQ84wtM6_O2b8',",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33',",
        "'diff_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33.d…",
        "'patch_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33.p…",
        "'issue_url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test…",
        "'number': 33,",
        "'state': 'open',",
        "'locked': False,",
        "... +38",
        "},",
        "'repository': {",
        "'id': 1137586356,",
        "'node_id': 'R_kgDOQ84wtA',",
        "'name': 'test',",
        "'full_name': 'VijayalakshmiKYADGI/test',",
        "'private': False,",
        "'owner': {",
        "'login': 'VijayalakshmiKYADGI',",
        "'id': 149805681,",
        "'node_id': 'U_kgDOCO3acQ',",
        "'avatar_url':",
        "'https://avatars.githubusercontent.com/u/149805681?v=4…",
        "'gravatar_id': '',",
        "'url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI',",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI',",
        "'followers_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/foll…",
        "'following_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/foll…",
        "'gists_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/gist…",
        "... +9",
        "},",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI/test',",
        "'description': None,",
        "'fork': False,",
        "'url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test…",
        "... +69",
        "},",
        "'sender': {",
        "'login': 'VijayalakshmiKYADGI',",
        "'id': 149805681,",
        "'node_id': 'U_kgDOCO3acQ',",
        "'avatar_url':",
        "'https://avatars.githubusercontent.com/u/149805681?v=4…",
        "'gravatar_id': '',",
        "'url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI',",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI',",
        "'followers_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/foll…",
        "'following_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/foll…",
        "'gists_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/gist…",
        "... +9",
        "},",
        "'installation': {",
        "'id': 104539256,",
        "'node_id':",
        "'MDIzOkludGVncmF0aW9uSW5zdGFsbGF0aW9uMTA0NTM5MjU2'",
        "}",
        "}",
        "pr_data = {",
        "'url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test…",
        "'id': 3208341244,",
        "'node_id': 'PR_kwDOQ84wtM6_O2b8',",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33',",
        "'diff_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33.d…",
        "'patch_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33.p…",
        "'issue_url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test…",
        "'number': 33,",
        "'state': 'open',",
        "'locked': False,",
        "... +38",
        "}",
        "pr_number = 33",
        "repo_data = {",
        "'id': 1137586356,",
        "'node_id': 'R_kgDOQ84wtA',",
        "'name': 'test',",
        "'full_name': 'VijayalakshmiKYADGI/test',",
        "'private': False,",
        "'owner': {",
        "'login': 'VijayalakshmiKYADGI',",
        "'id': 149805681,",
        "'node_id': 'U_kgDOCO3acQ',",
        "'avatar_url':",
        "'https://avatars.githubusercontent.com/u/149805681?v=4…",
        "'gravatar_id': '',",
        "'url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI',",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI',",
        "'followers_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/foll…",
        "'following_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/foll…",
        "'gists_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/gist…",
        "... +9",
        "},",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI/test',",
        "'description': None,",
        "'fork': False,",
        "'url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test…",
        "... +69",
        "}",
        "repo_full_name = 'VijayalakshmiKYADGI/test'",
        "self = <github_integration.webhook_handler.WebhookHandler",
        "object at 0x7f8e4b793140>",
        "╰──────────────────────────────────────────────────────────────────────────╯",
        "",
        "/app/github_integration/webhook_handler.py:143 in handle_opened",
        "",
        "140          # Get list of valid file paths from PR data",
        "141          valid_paths = [f.filename for f in pr_info.files_changed]",
        "142",
        "❱ 143          review_id = await self.commenter.post_review(",
        "144             repo_full_name,",
        "145             pr_number,",
        "146             review_result,",
        "",
        "╭───────────────────────────────── locals ─────────────────────────────────╮",
        "delivery_id = '3ec88a90-f9f1-11f0-96d4-dae0e7d1bb33'",
        "payload = {",
        "'action': 'opened',",
        "'number': 33,",
        "'pull_request': {",
        "'url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test…",
        "'id': 3208341244,",
        "'node_id': 'PR_kwDOQ84wtM6_O2b8',",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33',",
        "'diff_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33.d…",
        "'patch_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33.p…",
        "'issue_url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test…",
        "'number': 33,",
        "'state': 'open',",
        "'locked': False,",
        "... +38",
        "},",
        "'repository': {",
        "'id': 1137586356,",
        "'node_id': 'R_kgDOQ84wtA',",
        "'name': 'test',",
        "'full_name': 'VijayalakshmiKYADGI/test',",
        "'private': False,",
        "'owner': {",
        "'login': 'VijayalakshmiKYADGI',",
        "'id': 149805681,",
        "'node_id': 'U_kgDOCO3acQ',",
        "'avatar_url':",
        "'https://avatars.githubusercontent.com/u/149805681?v=4…",
        "'gravatar_id': '',",
        "'url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI',",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI',",
        "'followers_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/foll…",
        "'following_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/foll…",
        "'gists_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/gist…",
        "... +9",
        "},",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI/test',",
        "'description': None,",
        "'fork': False,",
        "'url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test…",
        "... +69",
        "},",
        "'sender': {",
        "'login': 'VijayalakshmiKYADGI',",
        "'id': 149805681,",
        "'node_id': 'U_kgDOCO3acQ',",
        "'avatar_url':",
        "'https://avatars.githubusercontent.com/u/149805681?v=4…",
        "'gravatar_id': '',",
        "'url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI',",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI',",
        "'followers_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/foll…",
        "'following_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/foll…",
        "'gists_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/gist…",
        "... +9",
        "},",
        "'installation': {",
        "'id': 104539256,",
        "'node_id':",
        "'MDIzOkludGVncmF0aW9uSW5zdGFsbGF0aW9uMTA0NTM5MjU2'",
        "}",
        "}",
        "pr_data = {",
        "'url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test…",
        "'id': 3208341244,",
        "'node_id': 'PR_kwDOQ84wtM6_O2b8',",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33',",
        "'diff_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33.d…",
        "'patch_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33.p…",
        "'issue_url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test…",
        "'number': 33,",
        "'state': 'open',",
        "'locked': False,",
        "... +38",
        "}",
        "pr_info = PRData(",
        "repo_name='VijayalakshmiKYADGI/test',",
        "pr_number=33,",
        "",
        "pr_url='https://github.com/VijayalakshmiKYADGI/test/pu…",
        "title='Feat/new',",
        "author='VijayalakshmiKYADGI',",
        "files_changed=[",
        "FileChange(",
        "filename='test-project/README.md',",
        "patch='@@ -10,11 +10,3 @@ It contains",
        "intentional:\\n \\n ## Usage\\n \\n-This repo works with",
        "'+375,",
        "language='markdown',",
        "additions=0,",
        "deletions=8,",
        "status='modified'",
        "),",
        "FileChange(",
        "filename='test-project/config.py',",
        "patch='@@ -0,0 +1,48",
        "@@\\n+\"\"\"\\n+Configuration file with hardcoded secrets",
        "and poor practi'+1452,",
        "language='python',",
        "additions=48,",
        "deletions=0,",
        "status='added'",
        "),",
        "FileChange(",
        "",
        "filename='test-project/inefficient_database.py',",
        "patch='@@ -0,0 +1,91 @@\\n+import",
        "sqlite3\\n+import time\\n+\\n+class DatabaseManager:\\n+",
        "def'+3019,",
        "language='python',",
        "additions=91,",
        "deletions=0,",
        "status='added'",
        "),",
        "FileChange(",
        "",
        "filename='test-project/slow_performance.py',",
        "patch='@@ -1,28 +1,49 @@\\n import",
        "time\\n+import sys\\n+from typing import List\\n \\n-def",
        "compl'+1878,",
        "language='python',",
        "additions=23,",
        "deletions=2,",
        "status='modified'",
        ")",
        "],",
        "full_diff='diff --git a/test-project/README.md",
        "b/test-project/README.md\\n--- a/test-project/'+7543",
        ")",
        "pr_number = 33",
        "repo_data = {",
        "'id': 1137586356,",
        "'node_id': 'R_kgDOQ84wtA',",
        "'name': 'test',",
        "'full_name': 'VijayalakshmiKYADGI/test',",
        "'private': False,",
        "'owner': {",
        "'login': 'VijayalakshmiKYADGI',",
        "'id': 149805681,",
        "'node_id': 'U_kgDOCO3acQ',",
        "'avatar_url':",
        "'https://avatars.githubusercontent.com/u/149805681?v=4…",
        "'gravatar_id': '',",
        "'url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI',",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI',",
        "'followers_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/foll…",
        "'following_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/foll…",
        "'gists_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/gist…",
        "... +9",
        "},",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI/test',",
        "'description': None,",
        "'fork': False,",
        "'url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test…",
        "... +69",
        "}",
        "repo_full_name = 'VijayalakshmiKYADGI/test'",
        "review_result = GitHubReview(",
        "inline_comments=[",
        "{",
        "'file_path': 'config.py',",
        "'line_number': '45',",
        "'comment': 'CRITICAL: Hardcoded credentials",
        "found. This is a major security risk. Use enviro'+1581",
        "}",
        "],",
        "summary_comment='This review highlights several",
        "critical and high-severity issues that require",
        "im'+2002,",
        "review_state='REQUESTED_CHANGES'",
        ")",
        "self = <github_integration.webhook_handler.WebhookHandler",
        "object at 0x7f8e4b793140>",
        "valid_paths = [",
        "'test-project/README.md',",
        "'test-project/config.py',",
        "'test-project/inefficient_database.py',",
        "'test-project/slow_performance.py'",
        "]",
        "╰──────────────────────────────────────────────────────────────────────────╯",
        "",
        "/app/github_integration/commenter.py:139 in post_review",
        "",
        "136          Review ID",
        "137       \"\"\"",
        "138       # Format comments",
        "❱ 139       summary = self._format_summary(github_review)",
        "140       formatted_comments = []",
        "141",
        "142       for comment in github_review.inline_comments:",
        "",
        "╭───────────────────────────────── locals ─────────────────────────────────╮",
        "event = 'COMMENT'",
        "github_review = GitHubReview(",
        "inline_comments=[",
        "{",
        "'file_path': 'config.py',",
        "'line_number': '45',",
        "'comment': 'CRITICAL: Hardcoded credentials",
        "found. This is a major security risk. Use enviro'+1581",
        "}",
        "],",
        "summary_comment='This review highlights several",
        "critical and high-severity issues that require",
        "im'+2002,",
        "review_state='REQUESTED_CHANGES'",
        ")",
        "pr_number = 33",
        "repo_full_name = 'VijayalakshmiKYADGI/test'",
        "self = <github_integration.commenter.GitHubCommenter object at",
        "0x7f8e4ba6b0e0>",
        "valid_paths = [",
        "'test-project/README.md',",
        "'test-project/config.py',",
        "'test-project/inefficient_database.py',",
        "'test-project/slow_performance.py'",
        "]",
        "╰──────────────────────────────────────────────────────────────────────────╯",
        "╰──────────────────────────────────────────────────────────────────────────────╯",
        "AttributeError: 'GitHubCommenter' object has no attribute '_format_summary'",
        "",
        "2026-01-25 13:48:17 [error    ] failed_to_post_error_comment   error=\"'GitHubCommenter' object has no attribute '_format_summary'\"",
        "2026-01-25 13:48:17 [error    ] webhook_background_failed      delivery_id=3ec88a90-f9f1-11f0-96d4-dae0e7d1bb33 error=\"'GitHubCommenter' object has no attribute '_format_summary'\"",
        "╭───────────────────── Traceback (most recent call last) ──────────────────────╮",
        "/app/api/endpoints/webhook.py:35 in process_webhook_background",
        "",
        "32    \"\"\"",
        "33    try:",
        "34       handler = WebhookHandler()",
        "❱  35       result = await handler.process_pr_event(payload, delivery_id)",
        "36",
        "37       logger.info(",
        "38          \"webhook_processed\",",
        "",
        "╭───────────────────────────────── locals ─────────────────────────────────╮",
        "delivery_id = '3ec88a90-f9f1-11f0-96d4-dae0e7d1bb33'",
        "e = AttributeError(\"'GitHubCommenter' object has no attribute",
        "'_format_summary'\")",
        "handler = <github_integration.webhook_handler.WebhookHandler object",
        "at 0x7f8e4b793140>",
        "payload = {",
        "'action': 'opened',",
        "'number': 33,",
        "'pull_request': {",
        "'url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test/pu…",
        "'id': 3208341244,",
        "'node_id': 'PR_kwDOQ84wtM6_O2b8',",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33',",
        "'diff_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33.diff…",
        "'patch_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33.patc…",
        "'issue_url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test/is…",
        "'number': 33,",
        "'full_name': 'VijayalakshmiKYADGI/test',",
        "'state': 'open',",
        "},",
        "'locked': False,",
        "'node_id': 'R_kgDOQ84wtA',",
        "... +38",
        "'repository': {",
        "'name': 'test',",
        "'id': 1137586356,",
        "'private': False,",
        "'owner': {",
        "'login': 'VijayalakshmiKYADGI',",
        "'id': 149805681,",
        "'node_id': 'U_kgDOCO3acQ',",
        "'avatar_url':",
        "'https://avatars.githubusercontent.com/u/149805681?v=4',",
        "'gravatar_id': '',",
        "'url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI',",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI',",
        "'followers_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/followe…",
        "'following_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/followi…",
        "'gists_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/gists{/…",
        "... +9",
        "},",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI/test',",
        "'description': None,",
        "'fork': False,",
        "'url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test',",
        "... +69",
        "},",
        "'sender': {",
        "'login': 'VijayalakshmiKYADGI',",
        "'id': 149805681,",
        "'node_id': 'U_kgDOCO3acQ',",
        "'avatar_url':",
        "'https://avatars.githubusercontent.com/u/149805681?v=4',",
        "'gravatar_id': '',",
        "'url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI',",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI',",
        "'followers_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/followe…",
        "'following_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/followi…",
        "'gists_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/gists{/…",
        "... +9",
        "},",
        "'installation': {",
        "'id': 104539256,",
        "'node_id':",
        "'MDIzOkludGVncmF0aW9uSW5zdGFsbGF0aW9uMTA0NTM5MjU2'",
        "}",
        "}",
        "╰──────────────────────────────────────────────────────────────────────────╯",
        "",
        "/app/github_integration/webhook_handler.py:71 in process_pr_event",
        "",
        "68",
        "69          # Route to appropriate handler",
        "70          if action == \"opened\":",
        "❱  71             return await self.handle_opened(payload, delivery_id)",
        "72          elif action == \"synchronize\":",
        "73             return await self.handle_synchronize(payload, delivery",
        "74          elif action == \"reopened\":",
        "",
        "╭───────────────────────────────── locals ──────────────────────���──────────╮",
        "action = 'opened'",
        "delivery_id = '3ec88a90-f9f1-11f0-96d4-dae0e7d1bb33'",
        "payload = {",
        "'action': 'opened',",
        "'number': 33,",
        "'pull_request': {",
        "'url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test…",
        "'id': 3208341244,",
        "'node_id': 'PR_kwDOQ84wtM6_O2b8',",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33',",
        "'diff_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33.d…",
        "'patch_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33.p…",
        "'issue_url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test…",
        "'number': 33,",
        "'state': 'open',",
        "'locked': False,",
        "... +38",
        "},",
        "'repository': {",
        "'id': 1137586356,",
        "'node_id': 'R_kgDOQ84wtA',",
        "'name': 'test',",
        "'full_name': 'VijayalakshmiKYADGI/test',",
        "'private': False,",
        "'owner': {",
        "'login': 'VijayalakshmiKYADGI',",
        "'id': 149805681,",
        "'node_id': 'U_kgDOCO3acQ',",
        "'avatar_url':",
        "'https://avatars.githubusercontent.com/u/149805681?v=4…",
        "'gravatar_id': '',",
        "'url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI',",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI',",
        "'followers_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/foll…",
        "'following_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/foll…",
        "'gists_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/gist…",
        "... +9",
        "},",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI/test',",
        "'description': None,",
        "'fork': False,",
        "'url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test…",
        "... +69",
        "},",
        "'sender': {",
        "'login': 'VijayalakshmiKYADGI',",
        "'id': 149805681,",
        "'node_id': 'U_kgDOCO3acQ',",
        "'avatar_url':",
        "'https://avatars.githubusercontent.com/u/149805681?v=4…",
        "'gravatar_id': '',",
        "'url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI',",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI',",
        "'followers_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/foll…",
        "'following_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/foll…",
        "'gists_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/gist…",
        "... +9",
        "},",
        "'installation': {",
        "'id': 104539256,",
        "'node_id':",
        "'MDIzOkludGVncmF0aW9uSW5zdGFsbGF0aW9uMTA0NTM5MjU2'",
        "}",
        "}",
        "pr_data = {",
        "'url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test…",
        "'id': 3208341244,",
        "'node_id': 'PR_kwDOQ84wtM6_O2b8',",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33',",
        "'diff_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33.d…",
        "'patch_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33.p…",
        "'issue_url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test…",
        "'number': 33,",
        "'state': 'open',",
        "'locked': False,",
        "... +38",
        "}",
        "pr_number = 33",
        "repo_data = {",
        "'id': 1137586356,",
        "'node_id': 'R_kgDOQ84wtA',",
        "'name': 'test',",
        "'full_name': 'VijayalakshmiKYADGI/test',",
        "'private': False,",
        "'owner': {",
        "'login': 'VijayalakshmiKYADGI',",
        "'id': 149805681,",
        "'node_id': 'U_kgDOCO3acQ',",
        "'avatar_url':",
        "'https://avatars.githubusercontent.com/u/149805681?v=4…",
        "'gravatar_id': '',",
        "'url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI',",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI',",
        "'followers_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/foll…",
        "'following_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/foll…",
        "'gists_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/gist…",
        "... +9",
        "},",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI/test',",
        "'description': None,",
        "'fork': False,",
        "'url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test…",
        "... +69",
        "}",
        "repo_full_name = 'VijayalakshmiKYADGI/test'",
        "self = <github_integration.webhook_handler.WebhookHandler",
        "object at 0x7f8e4b793140>",
        "╰──────────────────────────────────────────────────────────────────────────╯",
        "",
        "/app/github_integration/webhook_handler.py:143 in handle_opened",
        "",
        "140          # Get list of valid file paths from PR data",
        "141          valid_paths = [f.filename for f in pr_info.files_changed]",
        "142",
        "❱ 143          review_id = await self.commenter.post_review(",
        "144             repo_full_name,",
        "145             pr_number,",
        "146             review_result,",
        "",
        "╭───────────────────────────────── locals ─────────────────────────────────╮",
        "delivery_id = '3ec88a90-f9f1-11f0-96d4-dae0e7d1bb33'",
        "payload = {",
        "'action': 'opened',",
        "'number': 33,",
        "'pull_request': {",
        "'url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test…",
        "'id': 3208341244,",
        "'node_id': 'PR_kwDOQ84wtM6_O2b8',",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33',",
        "'diff_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33.d…",
        "'patch_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33.p…",
        "'issue_url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test…",
        "'number': 33,",
        "'state': 'open',",
        "'locked': False,",
        "... +38",
        "},",
        "'repository': {",
        "'id': 1137586356,",
        "'node_id': 'R_kgDOQ84wtA',",
        "'name': 'test',",
        "'full_name': 'VijayalakshmiKYADGI/test',",
        "'private': False,",
        "'owner': {",
        "'login': 'VijayalakshmiKYADGI',",
        "'id': 149805681,",
        "'node_id': 'U_kgDOCO3acQ',",
        "'avatar_url':",
        "'https://avatars.githubusercontent.com/u/149805681?v=4…",
        "'gravatar_id': '',",
        "'url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI',",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI',",
        "'followers_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/foll…",
        "'following_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/foll…",
        "'gists_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/gist…",
        "... +9",
        "},",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI/test',",
        "'description': None,",
        "'fork': False,",
        "'url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test…",
        "... +69",
        "},",
        "'sender': {",
        "'login': 'VijayalakshmiKYADGI',",
        "'id': 149805681,",
        "'node_id': 'U_kgDOCO3acQ',",
        "'avatar_url':",
        "'https://avatars.githubusercontent.com/u/149805681?v=4…",
        "'gravatar_id': '',",
        "'url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI',",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI',",
        "'followers_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/foll…",
        "'following_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/foll…",
        "'gists_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/gist…",
        "... +9",
        "},",
        "'installation': {",
        "'id': 104539256,",
        "'node_id':",
        "'MDIzOkludGVncmF0aW9uSW5zdGFsbGF0aW9uMTA0NTM5MjU2'",
        "}",
        "}",
        "pr_data = {",
        "'url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test…",
        "'id': 3208341244,",
        "'state': 'open',",
        "'node_id': 'PR_kwDOQ84wtM6_O2b8',",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33',",
        "'diff_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33.d…",
        "'patch_url':",
        "'https://github.com/VijayalakshmiKYADGI/test/pull/33.p…",
        "'issue_url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test…",
        "'number': 33,",
        "'locked': False,",
        "... +38",
        "}",
        "pr_info = PRData(",
        "repo_name='VijayalakshmiKYADGI/test',",
        "pr_number=33,",
        "",
        "pr_url='https://github.com/VijayalakshmiKYADGI/test/pu…",
        "title='Feat/new',",
        "author='VijayalakshmiKYADGI',",
        "files_changed=[",
        "FileChange(",
        "FileChange(",
        "filename='test-project/README.md',",
        "patch='@@ -10,11 +10,3 @@ It contains",
        "intentional:\\n \\n ## Usage\\n \\n-This repo works with",
        "'+375,",
        "language='markdown',",
        "additions=0,",
        "deletions=8,",
        "status='modified'",
        "),",
        "filename='test-project/config.py',",
        "patch='@@ -0,0 +1,48",
        "@@\\n+\"\"\"\\n+Configuration file with hardcoded secrets",
        "and poor practi'+1452,",
        "language='python',",
        "additions=48,",
        "deletions=0,",
        "status='added'",
        "),",
        "FileChange(",
        "",
        "",
        "filename='test-project/inefficient_database.py',",
        "patch='@@ -0,0 +1,91 @@\\n+import",
        "sqlite3\\n+import time\\n+\\n+class DatabaseManager:\\n+",
        "def'+3019,",
        "language='python',",
        "additions=91,",
        "deletions=0,",
        "status='added'",
        "),",
        "FileChange(",
        "filename='test-project/slow_performance.py',",
        "patch='@@ -1,28 +1,49 @@\\n import",
        "time\\n+import sys\\n+from typing import List\\n \\n-def",
        "compl'+1878,",
        "language='python',",
        "additions=23,",
        "deletions=2,",
        "status='modified'",
        ")",
        "],",
        "full_diff='diff --git a/test-project/README.md",
        "b/test-project/README.md\\n--- a/test-project/'+7543",
        ")",
        "pr_number = 33",
        "repo_data = {",
        "'id': 1137586356,",
        "'node_id': 'R_kgDOQ84wtA',",
        "'name': 'test',",
        "'full_name': 'VijayalakshmiKYADGI/test',",
        "'private': False,",
        "'owner': {",
        "'login': 'VijayalakshmiKYADGI',",
        "'id': 149805681,",
        "'node_id': 'U_kgDOCO3acQ',",
        "'avatar_url':",
        "'https://avatars.githubusercontent.com/u/149805681?v=4…",
        "'gravatar_id': '',",
        "'url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI',",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI',",
        "'followers_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/foll…",
        "'following_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/foll…",
        "'gists_url':",
        "'https://api.github.com/users/VijayalakshmiKYADGI/gist…",
        "... +9",
        "},",
        "'html_url':",
        "'https://github.com/VijayalakshmiKYADGI/test',",
        "'description': None,",
        "'fork': False,",
        "'url':",
        "'https://api.github.com/repos/VijayalakshmiKYADGI/test…",
        "... +69",
        "}",
        "repo_full_name = 'VijayalakshmiKYADGI/test'",
        "review_result = GitHubReview(",
        "inline_comments=[",
        "{",
        "'file_path': 'config.py',",
        "'line_number': '45',",
        "'comment': 'CRITICAL: Hardcoded credentials",
        "found. This is a major security risk. Use enviro'+1581",
        "}",
        "],",
        "summary_comment='This review highlights several",
        "critical and high-severity issues that require",
        "im'+2002,",
        "review_state='REQUESTED_CHANGES'",
        ")",
        "self = <github_integration.webhook_handler.WebhookHandler",
        "object at 0x7f8e4b793140>",
        "valid_paths = [",
        "'test-project/README.md',",
        "'test-project/config.py',",
        "'test-project/inefficient_database.py',",
        "'test-project/slow_performance.py'",
        "]",
        "╰──────────────────────────────────────────────────────────────────────────╯",
        "",
        "/app/github_integration/commenter.py:139 in post_review",
        "",
        "136          Review ID",
        "137       \"\"\"",
        "138       # Format comments",
        "❱ 139       summary = self._format_summary(github_review)",
        "140       formatted_comments = []",
        "141",
        "142       for comment in github_review.inline_comments:",
        "",
        "╭───────────────────────────────── locals ─────────────────────────────────╮",
        "event = 'COMMENT'",
        "github_review = GitHubReview(",
        "inline_comments=[",
        "{",
        "'file_path': 'config.py',",
        "'line_number': '45',",
        "'comment': 'CRITICAL: Hardcoded credentials",
        "found. This is a major security risk. Use enviro'+1581",
        "}",
        "],",
        "summary_comment='This review highlights several",
        "critical and high-severity issues that require",
        "im'+2002,",
        "review_state='REQUESTED_CHANGES'",
        ")",
        "pr_number = 33",
        "repo_full_name = 'VijayalakshmiKYADGI/test'",
        "self = <github_integration.commenter.GitHubCommenter object at",
        "0x7f8e4ba6b0e0>",
        "valid_paths = [",
        "'test-project/README.md',",
        "'test-project/config.py',",
        "'test-project/inefficient_database.py',",
        "'test-project/slow_performance.py'",
        "]",
        "╰──────────────────────────────────────────────────────────────────────────╯",
        "╰──────────────────────────────────────────────────────────────────────────────╯",
        "AttributeError: 'GitHubCommenter' object has no attribute '_format_summary'",
        ""
    ]
}